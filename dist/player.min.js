!function a(r,n,s){function l(e,t){if(!n[e]){if(!r[e]){var i="function"==typeof require&&require;if(!t&&i)return i(e,!0);if(o)return o(e,!0);throw(i=new Error("Cannot find module '"+e+"'")).code="MODULE_NOT_FOUND",i}i=n[e]={exports:{}},r[e][0].call(i.exports,function(t){return l(r[e][1][t]||t)},i,i.exports,a,r,n,s)}return n[e].exports}for(var o="function"==typeof require&&require,t=0;t<s.length;t++)l(s[t]);return l}({1:[function(t,e,i){"use strict";function l(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(t)))return;var i=[],a=!0,r=!1,n=void 0;try{for(var s,l=t[Symbol.iterator]();!(a=(s=l.next()).done)&&(i.push(s.value),!e||i.length!==e);a=!0);}catch(t){r=!0,n=t}finally{try{a||null==l.return||l.return()}finally{if(r)throw n}}return i}(t,e)||a(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function o(t){return function(t){if(Array.isArray(t))return r(t)}(t)||function(t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(t))return Array.from(t)}(t)||a(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function a(t,e){if(t){if("string"==typeof t)return r(t,e);var i=Object.prototype.toString.call(t).slice(8,-1);return"Map"===(i="Object"===i&&t.constructor?t.constructor.name:i)||"Set"===i?Array.from(t):"Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i)?r(t,e):void 0}}function r(t,e){(null==e||e>t.length)&&(e=t.length);for(var i=0,a=new Array(e);i<e;i++)a[i]=t[i];return a}function n(t,e){for(var i=0;i<e.length;i++){var a=e[i];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}Object.defineProperty(i,"__esModule",{value:!0}),i.PlaylistPlayer=void 0;var s="button.active",u="active",c="hidden",d="stamp",p="visible",y="canplay",h="click",m="ended",f="timeupdate",v=function(){function r(t,e,i,a){!function(t){if(!(t instanceof r))throw new TypeError("Cannot call a class as a function")}(this),(e.player=this).playerElm=e,this.playerElm.classList.add("playlist-player","grid","grid-cols-2","md:grid-cols-3","mx-auto","text-text_color","bg-bg_color","max-w-5xl"),this.src=JSON.parse(t.innerText),this.album=this.src.album||"ALBUM TITLE",this.artist=this.src.artist||"ARTIST NAME",this.artwork=this.src.artwork||null,this.list=this.src.tracks,this.debug=this.src.debug,this.separator=i||": ",this.strings=a||{play:"&#9654;",pause:"&#x23F8;&#xFE0E;",stop:"&#11035;",next:"&#x23ED;&#xFE0E;",prev:"&#x23EE;&#xFE0E;",mute:"&#128263;"},this.build()}var t,e,i;return t=r,(e=[{key:"build",value:function(){var t=this;this.buildDisplay().then(function(){t.setIndex(0),t.updateTrackDisplay()})}},{key:"buildDisplay",value:function(){var i=this;return new Promise(function(t,e){i.display=i.createElement({type:"div",parentElm:i.playerElm,cls:["player-display","grid","col-span-1","md:col-span-2","p-4"],attrs:null}),i.display.artwork=i.createElement({type:"img",cls:null,attrs:{src:i.artwork}}),i.display.parentElement.insertBefore(i.display.artwork,i.display),i.listElm=i.createElement({type:"ol",parentElm:i.display,cls:["list-decimal"]}),i.audioPlayer=i.createElement({type:"audio",parentElm:i.playerElm,cls:null}),i.currentArtist=i.createElement({type:"div",parentElm:i.display,cls:null}),i.audioPlayer=document.createElement("audio"),i.audioPlayer.addEventListener(f,i.updateTimeDisplay.bind(i)),i.audioPlayer.addEventListener(m,i.next.bind(i)),i.audioPlayer.addEventListener(y,i.renderStamps.bind(i)),["song","artist","album","progress","progressContainer"].forEach(function(t){i.display[t]=document.createElement("div"),i.display[t].setAttribute("data-label",t),i.display.appendChild(i.display[t])}),i.buildControls(),i.list.forEach(function(t,e){t=i.layoutTrack(t,e);Promise.resolve(t).then(function(t){i.listElm.insertBefore(t,i.listElm.childNodes[e])})}),t(!0)})}},{key:"buildControls",value:function(){var e=this;this.display.progressContainer=this.createElement({type:"div",parentElm:this.display,cls:["progress-container","border-solid","border","border-border_color","w-full","cursor-pointer","relative","my-4","h-10"]}),this.display.currentTime=this.createElement({type:"div",parentElm:this.display.progressContainer,cls:["time"]}),this.display.progress=this.createElement({type:"div",parentElm:this.display.progressContainer,cls:["h-full","inline-block","transition-all","duration-200","pointer-events-none","border-r","border-border_color","z-10","bg-gradient-to-r","from-blue-200","to-blue-300"]});var i=this.createElement({type:"div",parentElm:this.display,cls:["controls"]});["play","pause","stop","prev","next","mute"].forEach(function(t){e["".concat(t,"Btn")]=e.createElement({type:"button",innerHTML:e.strings[t],parentElm:i,attrs:{"data-action":t}}),e["".concat(t,"Btn")].addEventListener(h,e[t].bind(e))}),this.pauseBtn.classList.add(c),this.display.progressContainer.addEventListener(h,this.seek.bind(this));var a=this;this.listElm.addEventListener(h,function(t){a.playIndex(t.target.getAttribute("data-index"))})}},{key:"clearActiveButtons",value:function(){this.listElm.querySelectorAll(s).forEach(function(t){t.classList.remove(u)})}},{key:"setActiveButton",value:function(t){t=this.listElm.querySelector('button[data-index="'.concat(t,'"]'));t&&t.classList.add(u)}},{key:"mute",value:function(){this.audioPlayer.savedVolume=this.audioPlayer.volume||1,this.audioPlayer.volume=0<this.audioPlayer.volume?0:this.audioPlayer.savedVolume}},{key:"playIndex",value:function(t){this.setIndex(t),this.play()}},{key:"setIndex",value:function(t){this.index=parseInt(t),this.clearActiveButtons(),this.setActiveButton(this.index)}},{key:"togglePlayPause",value:function(){if((0<arguments.length&&void 0!==arguments[0]?arguments[0]:{}).playing)return this.playBtn.classList.add(c),void this.pauseBtn.classList.remove(c);this.playBtn.classList.remove(c),this.pauseBtn.classList.add(c)}},{key:"setTrack",value:function(){this.audioPlayer.src=this.list[this.index].file,this.updateTimeDisplay(),this.updateTrackDisplay()}},{key:"play",value:function(t){this.audioPlayer.src&&t||this.setTrack(),this.audioPlayer.play(),this.togglePlayPause({playing:!0})}},{key:"pause",value:function(){this.audioPlayer.pause(),this.togglePlayPause({playing:!1})}},{key:"stop",value:function(){this.pause(),this.audioPlayer.currentTime=0}},{key:"prev",value:function(){this.setIndex(this.normalizeIndex(this.index-1)),this.play()}},{key:"next",value:function(){this.setIndex(this.normalizeIndex(this.index+1)),this.play()}},{key:"seek",value:function(t){var e=t.target,i=(e=e.classList.contains(d)?e.parentElement:e).getClientRects()[0],e=(t.clientX-i.left)/e.offsetWidth*this.audioPlayer.duration;this.audioPlayer.currentTime=e}},{key:"normalizeIndex",value:function(t){t%=this.list.length;return 0<t?t:0}},{key:"layoutTrack",value:function(t,e){var i=document.createElement("li");return i.innerHTML='<button data-index="'.concat(e,'"> <span class="title">').concat(t.title,'</span>\n     <div class="ml-4 inline-block text-gray-300">\n      <span class="artist">').concat(t.artist||this.artist,"</span>").concat(this.separator,'<span class="album">').concat(t.album||this.album,"</span>\n     </div>\n     </button>"),i}},{key:"updateTrackDisplay",value:function(){var t=this.display,e=this.index,i=this.list;t.song.innerText=i[e].title,t.artist.innerText=i[e].artist||this.artist,t.album.innerText=i[e].album||this.album,t.artwork.src=i[e].artwork||this.artwork}},{key:"updateTimeDisplay",value:function(){var t=this.display;t.currentTime.innerText="".concat(b(this.audioPlayer.currentTime)," / ").concat(b(this.audioPlayer.duration)),t.progress.style.width=this.audioPlayer.currentTime/this.audioPlayer.duration*100+"%",this.audioPlayer.hasStamps&&this.checkStampsForDisplay()}},{key:"checkStampsForDisplay",value:function(){var i,t=this.list[this.index];t.stamps&&(i=this.audioPlayer.currentTime,t.stamps.forEach(function(t){var e=5;t.duration&&(e=t.duration),i>=t.time&&i<=t.time+e?t.elm.classList.add(p):t.elm.classList.remove(p)}))}},{key:"renderStamps",value:function(){var e=this;this.eraseStamps();var t=this.list[this.index];t.stamps&&(this.audioPlayer.hasStamps=!0,t.stamps.forEach(function(t){t.elm=e.createElement({type:"span",cls:[d],parentElm:e.display.progressContainer,attrs:{"data-label":t.message}}),t.elm.style.left=t.time/e.audioPlayer.duration*100+"%",t.duration&&(t.elm.style.width=t.duration/e.audioPlayer.duration*100+"%")}))}},{key:"eraseStamps",value:function(){this.audioPlayer.hasStamps=!1,this.display.progressContainer.querySelectorAll(".".concat(d)).forEach(function(t){t.remove()})}},{key:"createElement",value:function(t){var e,i=document.createElement(t.type);if(t.cls&&(e=i.classList).add.apply(e,o(t.cls)),t.attrs)for(var a=0,r=Object.entries(t.attrs);a<r.length;a++){var n=l(r[a],2),s=n[0],n=n[1];i.setAttribute(s,n)}return t.innerHTML&&(i.innerHTML=t.innerHTML),t.parentElm&&t.parentElm.appendChild(i),i}}])&&n(t.prototype,e),i&&n(t,i),r}();function b(t){var e=~~(t/3600),i=~~(t%3600/60),a=~~t%60,t="";return 0<e&&(t+=e+":"+(i<10?"0":"")),(t+=i+":"+(a<10?"0":""))+""+a}i.PlaylistPlayer=v,window.PlaylistPlayer=v},{}]},{},[1]);
